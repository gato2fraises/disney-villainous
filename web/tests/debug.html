<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üè∞ Disney Villainous - Debug</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1a2e;
            color: white;
            padding: 20px;
            margin: 0;
        }
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }
        .loading-content {
            text-align: center;
            color: white;
        }
        .loading-title {
            font-size: 3rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255,255,255,0.3);
            border-top: 3px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .main-menu {
            display: none;
            text-align: center;
            padding: 50px;
        }
        .main-menu.visible {
            display: block;
        }
        .game-title {
            font-size: 4rem;
            margin-bottom: 30px;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .menu-btn {
            display: block;
            width: 300px;
            margin: 15px auto;
            padding: 15px 30px;
            font-size: 1.2rem;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .menu-btn.primary {
            background: linear-gradient(45deg, #4a90e2, #357abd);
            color: white;
        }
        .menu-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .debug-panel {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.8);
            padding: 15px;
            border-radius: 10px;
            font-family: monospace;
            font-size: 12px;
            max-width: 300px;
        }
        .step {
            margin: 5px 0;
            padding: 5px;
            border-radius: 3px;
        }
        .step.success { background: rgba(39, 174, 96, 0.3); }
        .step.error { background: rgba(231, 76, 60, 0.3); }
        .step.info { background: rgba(52, 152, 219, 0.3); }
        .hidden { display: none !important; }
    </style>
</head>
<body>
    <!-- √âcran de chargement -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <h1 class="loading-title">üè∞ Disney Villainous</h1>
            <div class="loading-spinner"></div>
            <p class="loading-text">Pr√©paration de votre destin√©e mal√©fique...</p>
        </div>
    </div>

    <!-- Menu principal -->
    <div id="main-menu" class="main-menu">
        <h1 class="game-title">Disney Villainous</h1>
        <p>Version de debug - Interface simplifi√©e</p>
        
        <button class="menu-btn primary" onclick="showDebugInfo()">
            üß™ Informations de Debug
        </button>
        <button class="menu-btn primary" onclick="testGameData()">
            üìä Tester les Donn√©es
        </button>
        <button class="menu-btn primary" onclick="testInitialization()">
            üîß Test d'Initialisation
        </button>
    </div>

    <!-- Panel de debug -->
    <div id="debug-panel" class="debug-panel">
        <h3>üêõ Debug Log</h3>
        <div id="debug-log"></div>
    </div>

    <script>
        // Fonction de log pour le debug
        function debugLog(message, type = 'info') {
            const logDiv = document.getElementById('debug-log');
            const step = document.createElement('div');
            step.className = `step ${type}`;
            step.textContent = `${new Date().toLocaleTimeString()} - ${message}`;
            logDiv.appendChild(step);
            console.log(`[${type.toUpperCase()}] ${message}`);
            
            // Garder seulement les 20 derniers logs
            while (logDiv.children.length > 20) {
                logDiv.removeChild(logDiv.firstChild);
            }
        }

        // Fonction showNotification simplifi√©e
        function showNotification(message, type = 'info') {
            debugLog(`NOTIFICATION: ${message}`, type === 'error' ? 'error' : 'success');
        }

        // Simulation de l'initialisation
        debugLog('Application d√©marr√©e', 'info');

        // Test 1: Chargement des scripts
        debugLog('Chargement des scripts...', 'info');

        let scriptsLoaded = 0;
        const totalScripts = 6;

        function checkScriptsComplete() {
            scriptsLoaded++;
            debugLog(`Script ${scriptsLoaded}/${totalScripts} charg√©`, 'success');
            
            if (scriptsLoaded === totalScripts) {
                debugLog('Tous les scripts charg√©s, initialisation...', 'info');
                setTimeout(initializeApp, 1000);
            }
        }

        function loadScript(src, callback) {
            const script = document.createElement('script');
            script.src = src;
            script.onload = function() {
                debugLog(`‚úÖ ${src} charg√©`, 'success');
                checkScriptsComplete();
                if (callback) callback();
            };
            script.onerror = function() {
                debugLog(`‚ùå Erreur chargement ${src}`, 'error');
                checkScriptsComplete(); // Continuer m√™me en cas d'erreur
            };
            document.head.appendChild(script);
        }

        // Charger les scripts dans l'ordre
        loadScript('js/game-data.js');
        loadScript('js/animations.js');
        loadScript('js/card-manager.js');
        loadScript('js/drag-drop.js');
        loadScript('js/ui-manager.js');
        loadScript('js/game-logic.js');

        function initializeApp() {
            try {
                debugLog('D√©but de l\'initialisation', 'info');
                
                // Test des donn√©es
                if (typeof VILLAINS !== 'undefined') {
                    debugLog(`‚úÖ VILLAINS disponible (${Object.keys(VILLAINS).length} m√©chants)`, 'success');
                } else {
                    debugLog('‚ùå VILLAINS manquant', 'error');
                }

                // Test des classes
                const classes = ['AnimationManager', 'CardManager', 'DragDropManager', 'UIManager', 'GameManager'];
                classes.forEach(className => {
                    if (typeof window[className] !== 'undefined') {
                        debugLog(`‚úÖ Classe ${className} disponible`, 'success');
                    } else {
                        debugLog(`‚ùå Classe ${className} manquante`, 'error');
                    }
                });

                // Masquer l'√©cran de chargement
                debugLog('Masquage de l\'√©cran de chargement...', 'info');
                const loadingScreen = document.getElementById('loading-screen');
                const mainMenu = document.getElementById('main-menu');
                
                loadingScreen.style.opacity = '0';
                loadingScreen.style.transition = 'opacity 0.5s ease';
                
                setTimeout(() => {
                    loadingScreen.classList.add('hidden');
                    mainMenu.classList.add('visible');
                    debugLog('Menu principal affich√©', 'success');
                }, 500);

            } catch (error) {
                debugLog(`‚ùå Erreur d'initialisation: ${error.message}`, 'error');
                console.error('Erreur d√©taill√©e:', error);
            }
        }

        // Fonctions de test pour les boutons
        function showDebugInfo() {
            debugLog('=== INFORMATIONS DE DEBUG ===', 'info');
            debugLog(`Version navigateur: ${navigator.userAgent}`, 'info');
            debugLog(`URL: ${window.location.href}`, 'info');
            debugLog(`Scripts charg√©s: ${scriptsLoaded}/${totalScripts}`, 'info');
        }

        function testGameData() {
            debugLog('=== TEST DES DONN√âES ===', 'info');
            try {
                if (typeof VILLAINS !== 'undefined') {
                    Object.entries(VILLAINS).forEach(([id, villain]) => {
                        debugLog(`${villain.name}: ${villain.board.length} lieux`, 'success');
                    });
                }
                if (typeof VILLAIN_CARDS !== 'undefined') {
                    Object.entries(VILLAIN_CARDS).forEach(([villain, cards]) => {
                        debugLog(`Cartes ${villain}: ${cards.length}`, 'success');
                    });
                }
            } catch (error) {
                debugLog(`Erreur test donn√©es: ${error.message}`, 'error');
            }
        }

        function testInitialization() {
            debugLog('=== TEST INITIALISATION ===', 'info');
            try {
                if (typeof AnimationManager !== 'undefined') {
                    const anim = new AnimationManager();
                    debugLog('AnimationManager cr√©√© avec succ√®s', 'success');
                }
                if (typeof CardManager !== 'undefined') {
                    const card = new CardManager();
                    debugLog('CardManager cr√©√© avec succ√®s', 'success');
                }
            } catch (error) {
                debugLog(`Erreur test init: ${error.message}`, 'error');
            }
        }

        // Gestion des erreurs globales
        window.addEventListener('error', (event) => {
            debugLog(`‚ùå Erreur JavaScript: ${event.message} (${event.filename}:${event.lineno})`, 'error');
        });

        window.addEventListener('unhandledrejection', (event) => {
            debugLog(`‚ùå Promise rejet√©e: ${event.reason}`, 'error');
        });
    </script>
</body>
</html>