<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Disney Villainous‚Ñ¢ - Ultimate Edition | Connexion</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-gold: #D4AF37;
            --primary-purple: #4A148C;
            --primary-dark: #1A0E33;
            --secondary-blue: #1565C0;
            --accent-red: #B71C1C;
            --text-light: #F5F5F5;
            --text-dark: #212121;
            --surface-dark: #2E1065;
            --surface-light: rgba(255, 255, 255, 0.1);
            --shadow-main: 0 8px 32px rgba(0, 0, 0, 0.3);
            --gradient-main: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary-purple) 50%, var(--secondary-blue) 100%);
            --gradient-gold: linear-gradient(135deg, #FFD700 0%, #FFA000 50%, #FF8F00 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--gradient-main);
            background-attachment: fixed;
            color: var(--text-light);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--gradient-main);
            z-index: 3000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 1;
            transition: opacity 0.5s ease-out;
        }

        .loading-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .studio-logo {
            font-family: 'Cinzel', serif;
            font-size: 1.5rem;
            color: var(--text-light);
            margin-bottom: 2rem;
            animation: fadeIn 1s ease-in-out;
        }

        .game-logo-loading {
            font-family: 'Cinzel', serif;
            font-size: 4rem;
            font-weight: 700;
            background: var(--gradient-gold);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-align: center;
            margin-bottom: 1rem;
            animation: fadeIn 1s ease-in-out 0.5s both;
        }

        .loading-subtitle {
            font-size: 1.2rem;
            color: var(--text-light);
            margin-bottom: 3rem;
            animation: fadeIn 1s ease-in-out 1s both;
        }

        .loading-bar-container {
            width: 400px;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .loading-bar {
            height: 100%;
            background: var(--gradient-gold);
            width: 0%;
            transition: width 0.3s ease;
        }

        .loading-percentage {
            color: var(--text-light);
            font-size: 1rem;
            font-weight: 600;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* √âcran de Connexion */
        .login-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: var(--gradient-main);
            z-index: 200;
        }

        .login-container {
            background: var(--surface-dark);
            border: 2px solid var(--primary-gold);
            border-radius: 20px;
            padding: 3rem;
            box-shadow: var(--shadow-main);
            max-width: 450px;
            width: 90%;
            text-align: center;
            animation: slideUp 0.8s ease-out;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .login-logo {
            font-family: 'Cinzel', serif;
            font-size: 2.5rem;
            font-weight: 700;
            background: var(--gradient-gold);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
        }

        .login-subtitle {
            color: rgba(245, 245, 245, 0.8);
            margin-bottom: 2rem;
            font-size: 1.1rem;
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 2rem;
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid var(--primary-gold);
        }

        .auth-tab {
            flex: 1;
            padding: 0.8rem 1rem;
            background: transparent;
            color: var(--text-light);
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .auth-tab.active {
            background: var(--primary-gold);
            color: var(--primary-dark);
            font-weight: 600;
        }

        .auth-tab:hover:not(.active) {
            background: rgba(212, 175, 55, 0.2);
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .input-group {
            position: relative;
        }

        .form-input {
            width: 100%;
            padding: 1rem;
            border: 2px solid rgba(212, 175, 55, 0.3);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-light);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-gold);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.3);
        }

        .form-input::placeholder {
            color: rgba(245, 245, 245, 0.5);
        }

        .input-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary-gold);
            font-size: 1.2rem;
        }

        .form-input.with-icon {
            padding-left: 3rem;
        }

        .password-toggle {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--primary-gold);
            cursor: pointer;
            font-size: 1.1rem;
        }

        .auth-button {
            background: var(--gradient-gold);
            color: var(--primary-dark);
            border: none;
            padding: 1rem 2rem;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }

        .auth-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(212, 175, 55, 0.4);
        }

        .auth-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .forgot-password {
            color: var(--primary-gold);
            text-decoration: none;
            font-size: 0.9rem;
            margin-top: 1rem;
            display: inline-block;
            transition: opacity 0.3s ease;
        }

        .forgot-password:hover {
            opacity: 0.8;
        }

        .social-login {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(212, 175, 55, 0.3);
        }

        .social-title {
            color: rgba(245, 245, 245, 0.8);
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        .social-buttons {
            display: flex;
            gap: 1rem;
        }

        .social-btn {
            flex: 1;
            padding: 0.8rem;
            border: 2px solid rgba(212, 175, 55, 0.3);
            border-radius: 10px;
            background: transparent;
            color: var(--text-light);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .social-btn:hover {
            border-color: var(--primary-gold);
            background: rgba(212, 175, 55, 0.1);
        }

        /* Profil utilisateur (header) */
        .user-profile {
            display: flex;
            align-items: center;
            gap: 1rem;
            color: var(--text-light);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--gradient-gold);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: var(--primary-dark);
            border: 2px solid var(--primary-gold);
        }

        .user-info {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-weight: 600;
            color: var(--primary-gold);
        }

        .user-level {
            font-size: 0.8rem;
            color: rgba(245, 245, 245, 0.7);
        }

        .logout-btn {
            background: transparent;
            border: 1px solid var(--accent-red);
            color: var(--accent-red);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .logout-btn:hover {
            background: var(--accent-red);
            color: var(--text-light);
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 100px;
            right: 20px;
            background: var(--surface-dark);
            color: var(--text-light);
            padding: 1rem 1.5rem;
            border-radius: 10px;
            border: 2px solid var(--primary-gold);
            z-index: 2500;
            max-width: 300px;
            box-shadow: var(--shadow-main);
            animation: slideIn 0.3s ease-out;
            white-space: pre-line;
        }

        .notification.success {
            border-color: #4CAF50;
        }

        .notification.error {
            border-color: var(--accent-red);
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }

        /* Styles existants pour le jeu (copi√©s de la version pr√©c√©dente) */
        .game-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: rgba(26, 14, 51, 0.95);
            backdrop-filter: blur(15px);
            border-bottom: 2px solid var(--primary-gold);
            padding: 0.8rem 2rem;
            display: none;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1600px;
            margin: 0 auto;
        }

        .game-info {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .logo-header {
            font-family: 'Cinzel', serif;
            font-size: 1.5rem;
            font-weight: 700;
            background: var(--gradient-gold);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .game-status {
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .status-value {
            color: var(--primary-gold);
            font-weight: 600;
        }

        .header-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .control-btn {
            background: var(--surface-dark);
            border: 1px solid var(--primary-gold);
            color: var(--text-light);
            padding: 0.6rem 1.2rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .control-btn:hover {
            background: var(--primary-gold);
            color: var(--primary-dark);
        }

        .control-btn.primary {
            background: var(--gradient-gold);
            color: var(--primary-dark);
            border: none;
        }

        /* Menu principal cach√© au d√©but */
        .main-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            padding: 2rem;
            text-align: center;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: var(--gradient-main);
            z-index: 100;
        }

        .menu-title {
            font-family: 'Cinzel', serif;
            font-size: 3rem;
            margin-bottom: 1rem;
            background: var(--gradient-gold);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .menu-subtitle {
            font-size: 1.2rem;
            margin-bottom: 3rem;
            color: rgba(245, 245, 245, 0.9);
        }

        .menu-buttons {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            max-width: 400px;
            margin: 0 auto;
        }

        .menu-btn {
            background: var(--surface-dark);
            border: 2px solid var(--primary-gold);
            color: var(--text-light);
            padding: 1rem 2rem;
            border-radius: 10px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .menu-btn:hover {
            background: var(--primary-gold);
            color: var(--primary-dark);
            transform: translateY(-2px);
        }

        .menu-btn.primary {
            background: var(--gradient-gold);
            color: var(--primary-dark);
            border: none;
        }

        /* Interface de jeu cach√©e */
        .game-interface {
            margin-top: 70px;
            padding: 1rem;
            max-width: 1600px;
            margin-left: auto;
            margin-right: auto;
            display: none;
        }

        .game-interface.active {
            display: block;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .login-container {
                padding: 2rem;
                margin: 1rem;
            }
            
            .social-buttons {
                flex-direction: column;
            }
            
            .auth-tabs {
                font-size: 0.9rem;
            }
        }
    </style>
</head>

<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="studio-logo">VILLAIN STUDIOS</div>
        <div class="game-logo-loading">Disney Villainous‚Ñ¢</div>
        <div class="loading-subtitle">Ultimate Digital Edition</div>
        <div class="loading-bar-container">
            <div class="loading-bar" id="loadingBar"></div>
        </div>
        <div class="loading-percentage" id="loadingPercentage">0%</div>
    </div>

    <!-- √âcran de Connexion -->
    <div class="login-screen" id="loginScreen" style="display: none;">
        <div class="login-container">
            <h1 class="login-logo">Disney Villainous‚Ñ¢</h1>
            <p class="login-subtitle">Acc√©dez √† votre royaume des m√©chants</p>
            
            <div class="auth-tabs">
                <button class="auth-tab active" onclick="switchTab('login')">Connexion</button>
                <button class="auth-tab" onclick="switchTab('register')">Inscription</button>
            </div>
            
            <!-- Formulaire de Connexion -->
            <form class="auth-form" id="loginForm">
                <div class="input-group">
                    <span class="input-icon">üë§</span>
                    <input type="text" class="form-input with-icon" placeholder="Nom d'utilisateur ou email" required>
                </div>
                
                <div class="input-group">
                    <span class="input-icon">üîí</span>
                    <input type="password" class="form-input with-icon" id="loginPassword" placeholder="Mot de passe" required>
                    <button type="button" class="password-toggle" onclick="togglePassword('loginPassword')">üëÅÔ∏è</button>
                </div>
                
                <button type="submit" class="auth-button">üö™ Se Connecter</button>
                
                <a href="#" class="forgot-password" onclick="forgotPassword()">Mot de passe oubli√© ?</a>
            </form>
            
            <!-- Formulaire d'Inscription -->
            <form class="auth-form" id="registerForm" style="display: none;">
                <div class="input-group">
                    <span class="input-icon">üë§</span>
                    <input type="text" class="form-input with-icon" placeholder="Nom d'utilisateur" required>
                </div>
                
                <div class="input-group">
                    <span class="input-icon">üìß</span>
                    <input type="email" class="form-input with-icon" placeholder="Adresse email" required>
                </div>
                
                <div class="input-group">
                    <span class="input-icon">üîí</span>
                    <input type="password" class="form-input with-icon" id="registerPassword" placeholder="Mot de passe" required>
                    <button type="button" class="password-toggle" onclick="togglePassword('registerPassword')">üëÅÔ∏è</button>
                </div>
                
                <div class="input-group">
                    <span class="input-icon">üîí</span>
                    <input type="password" class="form-input with-icon" placeholder="Confirmer le mot de passe" required>
                </div>
                
                <button type="submit" class="auth-button">‚ú® Cr√©er un Compte</button>
            </form>
            
            <!-- Connexion Sociale -->
            <div class="social-login">
                <p class="social-title">Ou connectez-vous avec :</p>
                <div class="social-buttons">
                    <button class="social-btn" onclick="socialLogin('google')">üåü Google</button>
                    <button class="social-btn" onclick="socialLogin('facebook')">üëë Facebook</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Header de jeu (avec profil utilisateur) -->
    <header class="game-header" id="gameHeader">
        <div class="header-content">
            <div class="game-info">
                <div class="logo-header">Disney Villainous‚Ñ¢</div>
                <div class="game-status">
                    <div class="status-item">
                        <span>Tour:</span>
                        <span class="status-value" id="turnNumber">1</span>
                    </div>
                    <div class="status-item">
                        <span>Joueur:</span>
                        <span class="status-value" id="currentPlayer">Jafar</span>
                    </div>
                    <div class="status-item">
                        <span>Temps:</span>
                        <span class="status-value" id="gameTimer">00:00</span>
                    </div>
                </div>
            </div>
            
            <div class="header-controls">
                <div class="user-profile">
                    <div class="user-avatar" id="userAvatar">üë§</div>
                    <div class="user-info">
                        <div class="user-name" id="userName">M√©chant</div>
                        <div class="user-level" id="userLevel">Niveau 1</div>
                    </div>
                </div>
                <button class="control-btn" onclick="returnToMenu()">üè† Menu</button>
                <button class="control-btn" onclick="showHelp()">‚ùì Aide</button>
                <button class="control-btn" onclick="saveGame()">üíæ Sauvegarder</button>
                <button class="logout-btn" onclick="logout()">üö™ D√©connexion</button>
                <button class="control-btn primary" onclick="endTurn()">‚è≠Ô∏è Fin du Tour</button>
            </div>
        </div>
    </header>

    <!-- Menu Principal -->
    <div class="main-menu" id="mainMenu">
        <h1 class="menu-title">Disney Villainous‚Ñ¢</h1>
        <p class="menu-subtitle">Ultimate Digital Edition</p>
        
        <div class="menu-buttons">
            <button class="menu-btn primary" onclick="startNewGame()">üéÆ Nouvelle Partie</button>
            <button class="menu-btn" onclick="loadSavedGame()">üìÅ Charger une Partie</button>
            <button class="menu-btn" onclick="showProfile()">üë§ Mon Profil</button>
            <button class="menu-btn" onclick="showLeaderboard()">üèÜ Classement</button>
            <button class="menu-btn" onclick="showTutorial()">üéì Tutoriel</button>
            <button class="menu-btn" onclick="showCredits()">üèÜ Cr√©dits</button>
            <button class="menu-btn" onclick="logout()">üö™ D√©connexion</button>
        </div>
    </div>

    <!-- Interface de Jeu (simplifi√©e pour cet exemple) -->
    <div class="game-interface" id="gameInterface">
        <div style="text-align: center; padding: 4rem; color: var(--text-light);">
            <h2 style="font-family: 'Cinzel', serif; font-size: 2rem; color: var(--primary-gold); margin-bottom: 2rem;">
                üéÆ Interface de Jeu
            </h2>
            <p style="font-size: 1.2rem; margin-bottom: 2rem;">
                Bienvenue <span id="gameUserName" style="color: var(--primary-gold);">M√©chant</span> !
            </p>
            <p style="color: rgba(245, 245, 245, 0.8);">
                L'interface de jeu compl√®te sera charg√©e ici...<br>
                (Plateau, cartes, actions, etc.)
            </p>
        </div>
    </div>

    <script>
        // Variables globales
        const gameState = {
            user: null,
            currentPlayer: 'Jafar',
            turnNumber: 1,
            gameStartTime: Date.now(),
            gameRunning: false
        };

        let loadingProgress = 0;
        let gameTimer = null;

        // Base de donn√©es utilisateurs simul√©e
        const userDatabase = {
            'admin': { password: 'admin123', name: 'Administrateur', level: 99, avatar: 'üëë' },
            'jafar': { password: 'lamp123', name: 'Jafar', level: 15, avatar: 'üßû‚Äç‚ôÇÔ∏è' },
            'malefique': { password: 'dragon123', name: 'Mal√©fique', level: 12, avatar: 'üêâ' },
            'test': { password: 'test', name: 'Testeur', level: 1, avatar: 'üé≠' }
        };

        // Fonctions utilitaires
        function $(id) {
            return document.getElementById(id);
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-in';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Loading screen
        function startLoading() {
            const loadingBar = $('loadingBar');
            const loadingPercentage = $('loadingPercentage');
            
            const interval = setInterval(() => {
                loadingProgress += Math.random() * 15 + 5;
                if (loadingProgress >= 100) {
                    loadingProgress = 100;
                    clearInterval(interval);
                    setTimeout(showLoginScreen, 800);
                }
                if (loadingBar) loadingBar.style.width = loadingProgress + '%';
                if (loadingPercentage) loadingPercentage.textContent = Math.floor(loadingProgress) + '%';
            }, 200);
        }

        function showLoginScreen() {
            const loadingScreen = $('loadingScreen');
            const loginScreen = $('loginScreen');
            
            if (loadingScreen) {
                loadingScreen.classList.add('hidden');
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                    if (loginScreen) {
                        loginScreen.style.display = 'flex';
                        showNotification('üé≠ Bienvenue ! Connectez-vous pour commencer', 'info');
                    }
                }, 500);
            }
        }

        // Syst√®me d'authentification
        function switchTab(tab) {
            const loginTab = document.querySelector('.auth-tab:first-child');
            const registerTab = document.querySelector('.auth-tab:last-child');
            const loginForm = $('loginForm');
            const registerForm = $('registerForm');
            
            if (tab === 'login') {
                loginTab.classList.add('active');
                registerTab.classList.remove('active');
                loginForm.style.display = 'flex';
                registerForm.style.display = 'none';
            } else {
                registerTab.classList.add('active');
                loginTab.classList.remove('active');
                registerForm.style.display = 'flex';
                loginForm.style.display = 'none';
            }
        }

        function togglePassword(inputId) {
            const input = $(inputId);
            const toggle = input.nextElementSibling;
            
            if (input.type === 'password') {
                input.type = 'text';
                toggle.textContent = 'üôà';
            } else {
                input.type = 'password';
                toggle.textContent = 'üëÅÔ∏è';
            }
        }

        function login(username, password) {
            // Simulation d'authentification
            if (userDatabase[username] && userDatabase[username].password === password) {
                gameState.user = {
                    username: username,
                    name: userDatabase[username].name,
                    level: userDatabase[username].level,
                    avatar: userDatabase[username].avatar
                };
                
                updateUserDisplay();
                showMainMenu();
                showNotification(`üéâ Connexion r√©ussie ! Bienvenue ${gameState.user.name}`, 'success');
                return true;
            } else {
                showNotification('‚ùå Nom d\'utilisateur ou mot de passe incorrect', 'error');
                return false;
            }
        }

        function register(username, email, password, confirmPassword) {
            // Validation simple
            if (password !== confirmPassword) {
                showNotification('‚ùå Les mots de passe ne correspondent pas', 'error');
                return false;
            }
            
            if (userDatabase[username]) {
                showNotification('‚ùå Ce nom d\'utilisateur existe d√©j√†', 'error');
                return false;
            }
            
            // Ajout √† la base de donn√©es
            userDatabase[username] = {
                password: password,
                name: username,
                level: 1,
                avatar: 'üé≠'
            };
            
            showNotification('‚ú® Compte cr√©√© avec succ√®s ! Vous pouvez maintenant vous connecter', 'success');
            switchTab('login');
            return true;
        }

        function socialLogin(provider) {
            // Simulation de connexion sociale
            showNotification(`üåü Connexion avec ${provider} en cours...`, 'info');
            
            setTimeout(() => {
                gameState.user = {
                    username: `${provider}_user`,
                    name: `Utilisateur ${provider}`,
                    level: 5,
                    avatar: provider === 'google' ? 'üåü' : 'üëë'
                };
                
                updateUserDisplay();
                showMainMenu();
                showNotification(`üéâ Connexion ${provider} r√©ussie !`, 'success');
            }, 2000);
        }

        function logout() {
            if (confirm('Voulez-vous vraiment vous d√©connecter ?')) {
                gameState.user = null;
                gameState.gameRunning = false;
                
                if (gameTimer) {
                    clearInterval(gameTimer);
                    gameTimer = null;
                }
                
                // Cacher toutes les interfaces
                $('mainMenu').style.display = 'none';
                $('gameInterface').classList.remove('active');
                $('gameHeader').style.display = 'none';
                
                // Afficher l'√©cran de connexion
                $('loginScreen').style.display = 'flex';
                
                showNotification('üëã D√©connexion r√©ussie', 'info');
            }
        }

        function forgotPassword() {
            const email = prompt('Entrez votre adresse email pour r√©cup√©rer votre mot de passe :');
            if (email) {
                showNotification('üìß Instructions envoy√©es par email !', 'info');
            }
        }

        function updateUserDisplay() {
            if (gameState.user) {
                $('userName').textContent = gameState.user.name;
                $('userLevel').textContent = `Niveau ${gameState.user.level}`;
                $('userAvatar').textContent = gameState.user.avatar;
                $('gameUserName').textContent = gameState.user.name;
            }
        }

        function showMainMenu() {
            $('loginScreen').style.display = 'none';
            $('mainMenu').style.display = 'flex';
        }

        // Gestion des formulaires
        document.addEventListener('DOMContentLoaded', () => {
            // Formulaire de connexion
            $('loginForm').addEventListener('submit', (e) => {
                e.preventDefault();
                const formData = new FormData(e.target);
                const inputs = e.target.querySelectorAll('.form-input');
                const username = inputs[0].value;
                const password = inputs[1].value;
                
                if (username && password) {
                    login(username, password);
                } else {
                    showNotification('‚ùå Veuillez remplir tous les champs', 'error');
                }
            });
            
            // Formulaire d'inscription
            $('registerForm').addEventListener('submit', (e) => {
                e.preventDefault();
                const inputs = e.target.querySelectorAll('.form-input');
                const username = inputs[0].value;
                const email = inputs[1].value;
                const password = inputs[2].value;
                const confirmPassword = inputs[3].value;
                
                if (username && email && password && confirmPassword) {
                    register(username, email, password, confirmPassword);
                } else {
                    showNotification('‚ùå Veuillez remplir tous les champs', 'error');
                }
            });
        });

        // Fonctions du menu principal
        function startNewGame() {
            if (!gameState.user) {
                showNotification('‚ùå Vous devez √™tre connect√© pour jouer', 'error');
                return;
            }
            
            $('mainMenu').style.display = 'none';
            $('gameInterface').classList.add('active');
            $('gameHeader').style.display = 'block';
            
            gameState.gameRunning = true;
            showNotification('üéÆ Nouvelle partie commenc√©e !', 'success');
        }

        function loadSavedGame() {
            showNotification('üìÅ Aucune partie sauvegard√©e trouv√©e', 'info');
        }

        function showProfile() {
            if (gameState.user) {
                showNotification(`üë§ Profil de ${gameState.user.name}\n\nNiveau: ${gameState.user.level}\nParties jou√©es: 42\nVictoires: 28`, 'info');
            }
        }

        function showLeaderboard() {
            showNotification('üèÜ Classement des M√©chants\n\n1. üëë Administrateur (Niveau 99)\n2. üßû‚Äç‚ôÇÔ∏è Jafar (Niveau 15)\n3. üêâ Mal√©fique (Niveau 12)\n4. üé≠ Testeur (Niveau 1)', 'info');
        }

        function returnToMenu() {
            if (confirm('Voulez-vous retourner au menu principal ? (La partie sera perdue)')) {
                $('gameInterface').classList.remove('active');
                $('gameHeader').style.display = 'none';
                $('mainMenu').style.display = 'flex';
                
                gameState.gameRunning = false;
                showNotification('üè† Retour au menu principal', 'info');
            }
        }

        function showTutorial() {
            showNotification('üéì Tutoriel Disney Villainous‚Ñ¢\n\n1. Connectez-vous avec votre compte\n2. Choisissez votre m√©chant pr√©f√©r√©\n3. Accomplissez votre objectif mal√©fique\n4. Devenez le plus grand des m√©chants !', 'info');
        }

        function showCredits() {
            showNotification('üèÜ Disney Villainous‚Ñ¢ Ultimate\n\nD√©velopp√© par Villain Studios\n¬© 2025 Tous droits r√©serv√©s\n\nConnexion s√©curis√©e activ√©e', 'info');
        }

        function showHelp() {
            showNotification('‚ùì Aide Rapide\n\nüéØ Connectez-vous pour acc√©der √† toutes les fonctionnalit√©s\nüë§ G√©rez votre profil et vos statistiques\nüèÜ Consultez le classement des joueurs\nüíæ Sauvegardez vos parties', 'info');
        }

        function showSettings() {
            showNotification('‚öôÔ∏è Param√®tres\n\n‚Ä¢ Connexion s√©curis√©e: Activ√©e\n‚Ä¢ Sauvegarde cloud: Activ√©e\n‚Ä¢ Notifications: Activ√©es\n‚Ä¢ Mode priv√©: D√©sactiv√©', 'info');
        }

        function saveGame() {
            if (gameState.user) {
                showNotification('üíæ Partie sauvegard√©e sur le cloud !', 'success');
            } else {
                showNotification('‚ùå Connexion requise pour sauvegarder', 'error');
            }
        }

        function endTurn() {
            gameState.turnNumber++;
            $('turnNumber').textContent = gameState.turnNumber;
            showNotification(`‚è≠Ô∏è Tour ${gameState.turnNumber} commenc√© !`, 'info');
        }

        // Initialisation
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üéÆ Disney Villainous‚Ñ¢ Ultimate Edition - Avec Syst√®me de Connexion');
            startLoading();
        });

        // Comptes de d√©monstration
        window.demoAccounts = {
            admin: 'admin123',
            jafar: 'lamp123',
            malefique: 'dragon123',
            test: 'test'
        };
    </script>
</body>
</html>